(()=>{"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const f=function(){function e(t){var n,r,o=t.selector,i=t.message;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.form=document.querySelector("#"+o),this.pattern={},this.method=(u(n={},"".concat(o,"-phone"),[["notEmpty"],["pattern","phone"]]),u(n,"".concat(o,"-name"),[["notEmpty"],["pattern","name"]]),u(n,"".concat(o,"-discount"),[["notEmpty"],["pattern","discount"]]),n),this.elementsForm=(r=this.form.elements,function(e){if(Array.isArray(e))return l(e)}(r)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).filter((function(e){return"button"!==e.tagName.toLowerCase()&&"button"!==e.type})),this.error=new Set,this.message=i}var t,n;return t=e,(n=[{key:"init",value:function(){var e=this;this.applyStyle(),this.setPattern(),this.elementsForm.forEach((function(t){return t.addEventListener("change",e.checkIt.bind(e))}))}},{key:"forSubmit",value:function(e){var t=this;return this.elementsForm.forEach((function(e){return t.checkIt({target:e})})),!this.error.size}},{key:"isValid",value:function(e){var t=this,n={notEmpty:function(e){return""!==e.value.trim()},pattern:function(e,t){return t.test(e.value)}};if(this.method){var r=this.method[e.id];if(r)return r.every((function(r){return n[r[0]](e,t.pattern[r[1]])}))}return!0}},{key:"checkIt",value:function(e){var t=e.target;this.isValid(t)?(this.showSuccess(t),this.error.delete(t)):(this.showError(t),this.error.add(t))}},{key:"showError",value:function(e){e.classList.remove("success"),e.classList.add("error"),e.nextElementSibling&&e.nextElementSibling.classList.contains("validator-error")||(this.message.textContent="Ошибка при вводе",this.message.classList.add("validator-error"),this.form.append(this.message))}},{key:"showSuccess",value:function(e){e.classList.remove("error"),e.classList.add("success"),e.nextElementSibling&&e.nextElementSibling.classList.contains("validator-error")&&e.nextElementSibling.remove()}},{key:"applyStyle",value:function(){var e=document.createElement("style");e.textContent="\n            input.error {\n                box-shadow: 0 0 0 2px rgb(161, 33, 50);\n            }\n        ",document.head.append(e)}},{key:"setPattern",value:function(){this.pattern.phone||(this.pattern.phone=/^\+7 \(\d{3}\) \d{3}\-\d{2}\-\d{2}$/),this.pattern.name||(this.pattern.name=/^[А-яё\ ]{2,50}$/i),this.pattern.discount||(this.pattern.discount=/^[А-яё\ \d]{2,50}$/i)}}])&&d(t.prototype,n),e}();var y,h,p,m,v,S,b;b=function(e){e.classList.toggle("active"),function(e){e.classList.contains("active")?e.style.display="block":e.style.display="none"}(e)},document.addEventListener("click",(function(e){var t=e.target,n=document.querySelector(".clubs-list").querySelector("ul"),r=document.getElementById("free_visit_form"),o=document.getElementById("callback_form"),i=document.getElementById("gift");t.closest(".club-select")&&t.closest("p")&&b(n),t.closest(".open-popup")&&b(r),t.closest(".callback-btn-header")&&b(o),t.closest(".fixed-gift")&&t.closest("img")&&(b(i),t.closest(".fixed-gift")&&t.closest(".fixed-gift").remove()),t.closest(".popup")&&t.closest(".popup").classList.contains("active")&&(t.closest(".overlay")||t.closest(".close_icon")||t.closest(".close-btn"))&&b(t.closest(".popup"))})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"+7 (___) ___-__-__",n=document.querySelectorAll(e);function r(e){var n=e.keyCode,r=t,o=r.replace(/\D/g,""),i=this.value.replace(/\D/g,""),a=0,c=r.replace(/[_\d]/g,(function(e){return a<i.length?i.charAt(a++)||o.charAt(a):e}));-1!=(a=c.indexOf("_"))&&(c=c.slice(0,a));var s=r.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");(!(s=new RegExp("^"+s+"$")).test(this.value)||this.value.length<5||n>47&&n<58)&&(this.value=c),"blur"==e.type&&this.value.length<5&&(this.value="")}var o,a=i(n);try{for(a.s();!(o=a.n()).done;){var c=o.value;c.addEventListener("input",r),c.addEventListener("focus",r),c.addEventListener("blur",r)}}catch(e){a.e(e)}finally{a.f()}}(".phone"),function(){var t=function(){function t(n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.currentSlide=0,this.container=document.querySelector(n),this.slide=e(this.container.querySelectorAll(r)),this.interval,this.dot=e(document.querySelectorAll(o))}var r,o;return r=t,(o=[{key:"noDisplay",value:function(){for(var e=1;e<this.slide.length;e++)this.slide[e].style.display="none";this.dot[0].classList.add("slick-active")}},{key:"show",value:function(e,t){e.classList.contains(t)?e.style.display="flex":e.style.display="none"}},{key:"prevSlide",value:function(e,t,n){e[t]&&(e[t].classList.remove(n),e===this.slide&&this.show(e[t],n))}},{key:"nextSlide",value:function(e,t,n){e[t]&&(e[t].classList.add(n),e===this.slide&&this.show(e[t],n))}},{key:"autoPlay",value:function(){this.prevSlide(this.slide,this.currentSlide,"active"),this.prevSlide(this.dot,this.currentSlide,"slick-active"),this.currentSlide++,this.currentSlide>=this.slide.length&&(this.currentSlide=0),this.nextSlide(this.slide,this.currentSlide,"active"),this.nextSlide(this.dot,this.currentSlide,"slick-active")}},{key:"startSlide",value:function(){this.interval=setInterval(this.autoPlay.bind(this),3e3)}},{key:"stopSlide",value:function(){clearInterval(this.interval)}},{key:"eventListeners",value:function(){var e=this;this.container.addEventListener("click",(function(t){t.preventDefault();var n=t.target;e.prevSlide(e.slide,e.currentSlide,"active"),e.prevSlide(e.dot,e.currentSlide,"slick-active"),n.closest(".slider-arrow.next")?e.currentSlide++:n.closest(".slider-arrow.prev")?e.currentSlide--:n.closest("li")&&e.dot.forEach((function(t,r){t===n.closest("li")&&(e.currentSlide=r)})),e.currentSlide>=e.slide.length?e.currentSlide=0:e.currentSlide<0&&(e.currentSlide=e.slide.length-1),e.nextSlide(e.slide,e.currentSlide,"active"),e.nextSlide(e.dot,e.currentSlide,"slick-active")})),this.container.addEventListener("mouseover",(function(t){(t.target.closest("span")||t.target.closest("button"))&&e.stopSlide()})),this.container.addEventListener("mouseout",(function(t){(t.target.closest("span")||t.target.closest("button"))&&e.startSlide()}))}}])&&n(r.prototype,o),t}();new t(".head-slider",".slide").startSlide(),new t(".head-slider",".slide");var r=new t(".gallery-slider",".slide","ul.slider-dots li");r.noDisplay(),r.startSlide(),r.eventListeners()}(),h=document.querySelector(".top-menu"),p=function(e){if(Array.isArray(e))return o(e)}(y=document.querySelectorAll("li.scroll"))||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(y)||r(y)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),m=document.querySelector(".popup-menu"),v=h.getBoundingClientRect().top+pageYOffset,S=document.documentElement.clientWidth,window.addEventListener("resize",(function(){(S=document.documentElement.clientWidth)>=768&&(h.style.position="")})),window.addEventListener("scroll",(function(){if(S<768){var e=h.getBoundingClientRect();pageYOffset<v&&(h.style.position=""),e.top<0&&(h.style.position="fixed")}})),document.addEventListener("click",(function(e){var t=e.target;t.matches('img[src="images/menu-button.png"]')&&(m.style.display="flex"),(t.matches('img[src="images/delete.png"]')||t.matches("a")&&t.closest(".popup-menu"))&&(m.style.display="none")})),function(){var e,t=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=r(e))){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==n.return||n.return()}finally{if(s)throw a}}}}(p);try{var n=function(){var t=e.value;t.querySelector("a").addEventListener("click",(function(e){var n;e.preventDefault(),n=t.querySelector("a").getAttribute("href"),document.querySelector(n).scrollIntoView({behavior:"smooth",block:"center"})}))};for(t.s();!(e=t.n()).done;)n()}catch(e){t.e(e)}finally{t.f()}}(),function(){var e=document.querySelector(".header-main"),t=document.querySelector("#totop");t.style.display="none",document.addEventListener("scroll",(function(){var n=e.getBoundingClientRect().top<-.5*e.offsetHeight;t.style.display=n?"block":"none"})),t.addEventListener("click",(function(t){t.preventDefault(),e.scrollIntoView({behavior:"smooth",block:"start"})}))}(),function(){var e={mozaika:{1:1999,6:9900,9:13900,12:19e3},schelkovo:{1:2999,6:14990,9:21990,12:24990}},t=document.querySelector("#card_order.main");if(t){var n,r,o=c(t.querySelector(".time").querySelectorAll("input")),i=t.querySelector("#price-total"),a=c(t.querySelectorAll(".club")),s=t.querySelector(".price-message").querySelector("input"),l=[],u=!0,d=2999;a.forEach((function(e){l.push(e.querySelector("input"))}));var f=function(){"ТЕЛО2020"===s.value.toUpperCase().trim()&&u&&(d*=.7,i.textContent=Math.ceil(d,-1),u=!1)};document.addEventListener("change",(function(){l.forEach((function(e){e.checked&&(n=e.value)})),o.forEach((function(e){e.checked&&(r=e.value)})),n&&r&&(d=e[n][r],i.textContent=d),u=!0,f()})),document.addEventListener("click",(function(){f()}))}}(),function(e){var t,n=document.querySelector("#thanks"),r=document.querySelector("#error"),o=document.querySelector("#preloader"),i=document.createElement("div");i.classList.add("consent");var a=function(e){e.classList.toggle("active"),function(e){e.classList.contains("active")?e.style.display="block":e.style.display="none"}(e)};document.addEventListener("submit",(function(c){c.preventDefault();var s=c.target;if((s.matches("#card_order")||s.matches("#banner-form")||s.matches("#form1")||s.matches("#form2")||s.matches("#footer_form"))&&(t=s),function(t,n,r){var o=new e({selector:n,message:r});return o.init(),o.forSubmit(t)}(c,t.id,i)){if(t.querySelector("p.personal-data")&&!t.querySelector("p.personal-data").querySelector("input").checked)return i.textContent="Необходимо подтвердить согласие на обработку данных!",void t.append(i);t.querySelector(".consent")&&i.remove();var l=t.querySelectorAll("input");t.closest(".popup")&&(t.closest(".popup").style.display="none",t.closest(".popup").classList.toggle("active")),a(o);var u=new FormData(t),d={};u.forEach((function(e,t){d[t]=e})),l.forEach((function(e){(e.classList.contains("name")||e.classList.contains("phone")||e.classList.contains("discount"))&&(e.value="")})),t.querySelector("p.personal-data")&&(t.querySelector("p.personal-data").querySelector("input").checked=!1),"card_order"===t.id&&"main"===t.className&&(t.querySelector("#m1").checked=!0,t.querySelector("#card_leto_schelkovo").checked=!0,t.querySelector("#price-total").textContent=2999),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(d).then((function(e){if(200!==e.status)throw new Error("status network is not 200");a(o),a(n),setTimeout((function(){n.classList.contains("active")&&a(n)}),3e3)})).catch((function(e){a(o),a(r),setTimeout((function(){n.classList.contains("active")&&a(r)}),3e3)}))}}))}(f)})();