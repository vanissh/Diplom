(()=>{"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function r(e,t){if(e){if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw o}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const f=function(){function e(t){var n,r,i=t.selector,o=t.message;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.form=document.querySelector("#"+i),this.pattern={},this.method=(u(n={},"".concat(i,"-phone"),[["notEmpty"],["pattern","phone"]]),u(n,"".concat(i,"-name"),[["notEmpty"],["pattern","name"]]),u(n,"".concat(i,"-discount"),[["notEmpty"],["pattern","discount"]]),n),this.elementsForm=(r=this.form.elements,function(e){if(Array.isArray(e))return c(e)}(r)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).filter((function(e){return"button"!==e.tagName.toLowerCase()&&"button"!==e.type})),this.error=new Set,this.message=o}var t,n;return t=e,(n=[{key:"init",value:function(){var e=this;this.applyStyle(),this.setPattern(),this.elementsForm.forEach((function(t){return t.addEventListener("change",e.checkIt.bind(e))}))}},{key:"forSubmit",value:function(e){var t=this;return this.elementsForm.forEach((function(e){return t.checkIt({target:e})})),!this.error.size}},{key:"isValid",value:function(e){var t=this,n={notEmpty:function(e){return""!==e.value.trim()},pattern:function(e,t){return t.test(e.value)}};if(this.method){var r=this.method[e.id];if(r)return r.every((function(r){return n[r[0]](e,t.pattern[r[1]])}))}return!0}},{key:"checkIt",value:function(e){var t=e.target;this.isValid(t)?(this.showSuccess(t),this.error.delete(t)):(this.showError(t),this.error.add(t))}},{key:"showError",value:function(e){e.classList.remove("success"),e.classList.add("error"),e.nextElementSibling&&e.nextElementSibling.classList.contains("validator-error")||(this.message.textContent="Ошибка при вводе",this.message.classList.add("validator-error"),this.form.append(this.message))}},{key:"showSuccess",value:function(e){e.classList.remove("error"),e.classList.add("success"),e.nextElementSibling&&e.nextElementSibling.classList.contains("validator-error")&&e.nextElementSibling.remove()}},{key:"applyStyle",value:function(){var e=document.createElement("style");e.textContent="\n            input.error {\n                box-shadow: 0 0 0 2px rgb(161, 33, 50);\n            }\n        ",document.head.append(e)}},{key:"setPattern",value:function(){this.pattern.phone||(this.pattern.phone=/^\+7 \(\d{3}\) \d{3}\-\d{2}\-\d{2}$/),this.pattern.name||(this.pattern.name=/^[А-яё\ ]{2,50}$/i),this.pattern.discount||(this.pattern.discount=/^[А-яё\ \d]{2,50}$/i)}}])&&d(t.prototype,n),e}();function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const y=function(){function e(t){var n=t.section,r=t.main,i=t.wrap,o=t.position,a=void 0===o?0:o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.section=document.querySelector(n),this.main=this.section.querySelector(r),this.wrap=this.main.querySelector(i),this.slides=this.wrap.querySelectorAll("div"),this.slidesToShow=5,this.options={position:a,wigthSlide:Math.floor(100/this.slidesToShow)}}var t,n;return t=e,(n=[{key:"init",value:function(){this.addClass(),this.addStyle(),this.controlSlider()}},{key:"addClass",value:function(){this.main.classList.add("carusel-slider"),this.wrap.classList.add("carusel-slider__wrap");var e,t=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(this.slides);try{for(t.s();!(e=t.n()).done;)e.value.classList.add("carusel-slider__item")}catch(e){t.e(e)}finally{t.f()}}},{key:"prevSlide",value:function(){this.options.position>0&&(--this.options.position,this.wrap.style.transform="translateX(-".concat(this.options.position*this.options.wigthSlide,"%)"))}},{key:"nextSlide",value:function(){this.options.position<this.slides.length-this.slidesToShow&&(++this.options.position,this.wrap.style.transform="translateX(-".concat(this.options.position*this.options.wigthSlide,"%)"))}},{key:"controlSlider",value:function(){var e=this;this.section.addEventListener("click",(function(t){var n=t.target;n.closest(".prev")&&e.prevSlide(),n.closest(".next")&&e.nextSlide()}))}},{key:"addStyle",value:function(){var e=document.createElement("style");e.id="sliderCarusel-style",e.textContent="\n            .carusel-slider{ \n              overflow: hidden !important;\n            }\n            .carusel-slider__wrap{\n                display: flex !important;\n                transition: transform 0.25s !important;\n                will-change: transform !important;\n            }\n            .carusel-slider__item{\n                flex: 0 0 ".concat(this.options.wigthSlide,"% !important;\n                margin: 0 auto !important;\n            }\n        "),document.head.append(e)}}])&&p(t.prototype,n),e}();var m,v,S,b,g,w,k;k=function(e){e.classList.toggle("active"),function(e){e.classList.contains("active")?e.style.display="block":e.style.display="none"}(e)},document.addEventListener("click",(function(e){var t=e.target,n=document.querySelector(".clubs-list").querySelector("ul"),r=document.getElementById("free_visit_form"),i=document.getElementById("callback_form"),o=document.getElementById("gift");t.closest(".club-select")&&t.closest("p")&&k(n),t.closest(".open-popup")&&k(r),t.closest(".callback-btn-header")&&k(i),t.closest(".fixed-gift")&&t.closest("img")&&(k(o),t.closest(".fixed-gift")&&t.closest(".fixed-gift").remove()),t.closest(".popup")&&t.closest(".popup").classList.contains("active")&&(t.closest(".overlay")||t.closest(".close_icon")||t.closest(".close-btn"))&&k(t.closest(".popup"))})),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"+7 (___) ___-__-__",n=document.querySelectorAll(e);function r(e){var n=e.keyCode,r=t,i=r.replace(/\D/g,""),o=this.value.replace(/\D/g,""),a=0,s=r.replace(/[_\d]/g,(function(e){return a<o.length?o.charAt(a++)||i.charAt(a):e}));-1!=(a=s.indexOf("_"))&&(s=s.slice(0,a));var l=r.substr(0,this.value.length).replace(/_+/g,(function(e){return"\\d{1,"+e.length+"}"})).replace(/[+()]/g,"\\$&");(!(l=new RegExp("^"+l+"$")).test(this.value)||this.value.length<5||n>47&&n<58)&&(this.value=s),"blur"==e.type&&this.value.length<5&&(this.value="")}var i,a=o(n);try{for(a.s();!(i=a.n()).done;){var s=i.value;s.addEventListener("input",r),s.addEventListener("focus",r),s.addEventListener("blur",r)}}catch(e){a.e(e)}finally{a.f()}}(".phone"),function(t){var r=function(){function t(n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.currentSlide=0,this.container=document.querySelector(n),this.slide=e(this.container.querySelectorAll(r)),this.interval,this.dot=e(document.querySelectorAll(i))}var r,i;return r=t,(i=[{key:"noDisplay",value:function(){for(var e=1;e<this.slide.length;e++)this.slide[e].style.display="none";this.dot[0].classList.add("slick-active")}},{key:"show",value:function(e,t){e.classList.contains(t)?e.style.display="flex":e.style.display="none"}},{key:"prevSlide",value:function(e,t,n){e[t]&&(e[t].classList.remove(n),e===this.slide&&this.show(e[t],n))}},{key:"nextSlide",value:function(e,t,n){e[t]&&(e[t].classList.add(n),e===this.slide&&this.show(e[t],n))}},{key:"autoPlay",value:function(){this.prevSlide(this.slide,this.currentSlide,"active"),this.prevSlide(this.dot,this.currentSlide,"slick-active"),this.currentSlide++,this.currentSlide>=this.slide.length&&(this.currentSlide=0),this.nextSlide(this.slide,this.currentSlide,"active"),this.nextSlide(this.dot,this.currentSlide,"slick-active")}},{key:"startSlide",value:function(){this.interval=setInterval(this.autoPlay.bind(this),3e3)}},{key:"stopSlide",value:function(){clearInterval(this.interval)}},{key:"eventListeners",value:function(){var e=this;this.container.addEventListener("click",(function(t){t.preventDefault();var n=t.target;e.prevSlide(e.slide,e.currentSlide,"active"),e.prevSlide(e.dot,e.currentSlide,"slick-active"),n.closest(".slider-arrow.next")?e.currentSlide++:n.closest(".slider-arrow.prev")?e.currentSlide--:n.closest("li")&&e.dot.forEach((function(t,r){t===n.closest("li")&&(e.currentSlide=r)})),e.currentSlide>=e.slide.length?e.currentSlide=0:e.currentSlide<0&&(e.currentSlide=e.slide.length-1),e.nextSlide(e.slide,e.currentSlide,"active"),e.nextSlide(e.dot,e.currentSlide,"slick-active")})),this.container.addEventListener("mouseover",(function(t){(t.target.closest("span")||t.target.closest("button"))&&e.stopSlide()})),this.container.addEventListener("mouseout",(function(t){(t.target.closest("span")||t.target.closest("button"))&&e.startSlide()}))}}])&&n(r.prototype,i),t}();new r(".head-slider",".slide").startSlide(),new t({section:"#services",main:".services-slider",wrap:".items"}).init();var i=new r(".gallery-slider",".slide","ul.slider-dots li");i.noDisplay(),i.startSlide(),i.eventListeners()}(y),v=document.querySelector(".top-menu"),S=function(e){if(Array.isArray(e))return i(e)}(m=document.querySelectorAll("li.scroll"))||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(m)||r(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),b=document.querySelector(".popup-menu"),g=v.getBoundingClientRect().top+pageYOffset,w=document.documentElement.clientWidth,window.addEventListener("resize",(function(){(w=document.documentElement.clientWidth)>=768&&(v.style.position="")})),window.addEventListener("scroll",(function(){if(w<768){var e=v.getBoundingClientRect();pageYOffset<g&&(v.style.position=""),e.top<0&&(v.style.position="fixed")}})),document.addEventListener("click",(function(e){var t=e.target;t.matches('img[src="images/menu-button.png"]')&&(b.style.display="flex"),(t.matches('img[src="images/delete.png"]')||t.matches("a")&&t.closest(".popup-menu"))&&(b.style.display="none")})),function(){var e,t=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=r(e))){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}(S);try{var n=function(){var t=e.value;t.querySelector("a").addEventListener("click",(function(e){var n;e.preventDefault(),n=t.querySelector("a").getAttribute("href"),document.querySelector(n).scrollIntoView({behavior:"smooth",block:"center"})}))};for(t.s();!(e=t.n()).done;)n()}catch(e){t.e(e)}finally{t.f()}}(),function(){var e=document.querySelector(".header-main"),t=document.querySelector("#totop");t.style.display="none",document.addEventListener("scroll",(function(){var n=e.getBoundingClientRect().top<-.5*e.offsetHeight;t.style.display=n?"block":"none"})),t.addEventListener("click",(function(t){t.preventDefault(),e.scrollIntoView({behavior:"smooth",block:"start"})}))}(),function(){var e={mozaika:{1:1999,6:9900,9:13900,12:19e3},schelkovo:{1:2999,6:14990,9:21990,12:24990}},t=document.querySelector("#card_order.main");if(t){var n,r,i=s(t.querySelector(".time").querySelectorAll("input")),o=t.querySelector("#price-total"),a=s(t.querySelectorAll(".club")),l=t.querySelector(".price-message").querySelector("input"),c=[],u=!0,d=2999;a.forEach((function(e){c.push(e.querySelector("input"))}));var f=function(){"ТЕЛО2020"===l.value.toUpperCase().trim()&&u&&(d*=.7,o.textContent=Math.ceil(d,-1),u=!1)};document.addEventListener("change",(function(){c.forEach((function(e){e.checked&&(n=e.value)})),i.forEach((function(e){e.checked&&(r=e.value)})),n&&r&&(d=e[n][r],o.textContent=d),u=!0,f()})),document.addEventListener("click",(function(){f()}))}}(),function(e){var t,n=document.querySelector("#thanks"),r=document.querySelector("#error"),i=document.querySelector("#preloader"),o=document.createElement("div");o.classList.add("consent");var a=function(e){e.classList.toggle("active"),function(e){e.classList.contains("active")?e.style.display="block":e.style.display="none"}(e)};document.addEventListener("submit",(function(s){s.preventDefault();var l=s.target;if((l.matches("#card_order")||l.matches("#banner-form")||l.matches("#form1")||l.matches("#form2")||l.matches("#footer_form"))&&(t=l),function(t,n,r){var i=new e({selector:n,message:r});return i.init(),i.forSubmit(t)}(s,t.id,o)){if(t.querySelector("p.personal-data")&&!t.querySelector("p.personal-data").querySelector("input").checked)return o.textContent="Необходимо подтвердить согласие на обработку данных!",void t.append(o);t.querySelector(".consent")&&o.remove();var c=t.querySelectorAll("input");t.closest(".popup")&&(t.closest(".popup").style.display="none",t.closest(".popup").classList.toggle("active")),a(i);var u=new FormData(t),d={};u.forEach((function(e,t){d[t]=e})),c.forEach((function(e){(e.classList.contains("name")||e.classList.contains("phone")||e.classList.contains("discount"))&&(e.value="")})),t.querySelector("p.personal-data")&&(t.querySelector("p.personal-data").querySelector("input").checked=!1),"card_order"===t.id&&"main"===t.className&&(t.querySelector("#m1").checked=!0,t.querySelector("#card_leto_schelkovo").checked=!0,t.querySelector("#price-total").textContent=2999),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(d).then((function(e){if(200!==e.status)throw new Error("status network is not 200");a(i),a(n),setTimeout((function(){n.classList.contains("active")&&a(n)}),3e3)})).catch((function(e){a(i),a(r),setTimeout((function(){n.classList.contains("active")&&a(r)}),3e3)}))}}))}(f)})();